(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".subcategory_wrapper_box"),n=document.querySelector(".subcategory_3d_box"),t=document.querySelectorAll(".subcategory");if(e&&n&&t.length>0){const c=e.clientWidth,o=Math.floor(t.length/2),i=t[o],a=i.offsetLeft+i.offsetWidth/2;e.scrollLeft=a-c/2}});let $=document.querySelector(".right_nav_block .fa-solid");$.addEventListener("click",A);function A(e){document.querySelector(".navigation_menu").classList.toggle("navigation_menu_open_click");let t=document.querySelector(".overlay");t.style.display="block"}let F=document.querySelector(".navigation_menu_close_button");F.addEventListener("click",N);function N(e){document.querySelector(".navigation_menu").classList.toggle("navigation_menu_open_click");let t=document.querySelector(".overlay");t.style.display="none"}let T=document.querySelectorAll(".navigation_menu a");T.forEach(e=>{e.addEventListener("click",function(n){n.preventDefault(),N(),setTimeout(()=>{window.location.href=e.getAttribute("href")},300)})});let k=document.querySelector(".quick_menu_filter");k&&k.addEventListener("click",J);function J(e){let n=document.querySelector(".catalog_menu");n.classList.toggle("catalog_menu_open");let t=document.querySelector(".catalog_overlay"),c=document.querySelector("footer");document.querySelector("#category_header").classList.toggle("category_header"),document.querySelector("#filter_box").classList.toggle("filter_box_query"),n.classList=="catalog_menu catalog_menu_open"?(t.style.display="block",c.style.position="fixed"):(t.style.display="none",c.style.position="static")}document.addEventListener("DOMContentLoaded",()=>{const c=window.location.hostname==="shaialt.github.io"?"/Moto-Ride/":"/client/";fetch(`${c}public/data/data.json`).then(o=>o.json()).then(o=>{let i=0;o.forEach(()=>i++);const a=document.querySelector(".total_products");if(a&&(a.textContent=`Discover ${i} exlusive motorcyles`),o.sort((s,r)=>r.popularity-s.popularity).slice(0,4).forEach(s=>{W(s)}),window.location.href.includes("product.html")){const s=window.location.href.split("=")[2].split("&")[0],r=o.find(u=>u.id===s);r?oe(r):console.warn("Not found product with id:",s)}else window.location.href.includes("catalog.html")&&o.forEach(s=>{M(s)})}).catch(o=>console.error("Error loading JSON:",o)),H(),V()});function M(e){if(window.location.pathname.includes("catalog.html")){//!: קריאה לפונקציה שיוצרת את המוצר בקטלוג
R(e)}//!: השמה של איבנט על האייקונים שבתוך המוצר להוספה למועדפים
document.querySelectorAll(".product_super_box").forEach(t=>{const c=t.querySelector(".add_to_wishlist");c&&c.addEventListener("click",D);const o=t.querySelector(".add_to_cart");o&&o.addEventListener("click",G)});//!: קריאה לפונקציה שמעדכנת מצב מועדפים ועגלה לאחר קבלת תשובה מהשרת
U(),K()}function W(e){const n=document.createElement("div");n.classList.add("top_product_super_box"),n.id=e.id,n.setAttribute("data-stock",e.stock||1),e.status&&n.style.setProperty(`--${e.status}`,"true");const t=document.createElement("div");t.classList.add("box");const c=document.createElement("p");c.textContent="Moto-Ride 🏍️",t.appendChild(c);const o=document.createElement("div");o.classList.add("product_box");const i=document.createElement("div");i.classList.add("product_img_box");const a=document.createElement("img");a.src=e.image,a.classList.add("product_img"),i.appendChild(a);const d=document.createElement("div");d.classList.add("product_logo_box");const s=document.createElement("img");s.src=e.logo,s.classList.add("product_logo_img");const r=document.createElement("div"),u=document.createElement("i");u.classList.add("fa-solid","fa-heart","add_to_wishlist");const p=document.createElement("i");p.classList.add("fa-solid","fa-cart-shopping","add_to_cart"),r.appendChild(u),r.appendChild(p),d.appendChild(s),d.appendChild(r);const l=document.createElement("div");l.classList.add("center");const h=document.createElement("article");h.classList.add("product_name_box");const m=document.createElement("h3");m.classList.add("product_name"),m.textContent=e.name,h.appendChild(m);const _=document.createElement("article");_.classList.add("describe_box");const g=document.createElement("p");g.classList.add("describe"),g.textContent=e.description,_.appendChild(g);const f=document.createElement("article");f.classList.add("buy_box");const C=document.createElement("div"),y=document.createElement("div");y.classList.add("original_price_box");const x=document.createElement("h4");x.classList.add("original_price"),x.textContent=e.originalPrice;const E=document.createElement("p");E.classList.add("discount"),E.textContent=e.discount,y.appendChild(x),y.appendChild(E);const S=document.createElement("h2");S.textContent=e.finalPrice,C.appendChild(y),C.appendChild(S);const L=document.createElement("a");L.href=`product.html?category=${encodeURIComponent(e.category)}&id=${e.id}&name=${encodeURIComponent(e.name)}`,L.classList.add("a_button");const b=document.createElement("button");b.classList.add("button");const I=document.createElement("i");I.classList.add("fa-solid","fa-bag-shopping"),b.appendChild(I),L.appendChild(b),f.appendChild(C),f.appendChild(L),l.appendChild(h),l.appendChild(_),l.appendChild(f);const v=document.createElement("div");v.classList.add("new_popular");const w=document.createElement("div");w.classList.add("curve"),o.appendChild(i),o.appendChild(d),o.appendChild(l),o.appendChild(v),o.appendChild(w),n.appendChild(t),n.appendChild(o);const q=document.querySelector("#top_products");q&&q.appendChild(n)}function R(e){const n=document.createElement("div");n.classList.add("product_super_box"),n.id=e.id,n.setAttribute("data-stock",e.stock||1),e.status&&n.style.setProperty(`--${e.status}`,"true");const t=document.createElement("div");t.classList.add("box");const c=document.createElement("p");c.textContent="Moto-Ride 🏍️",t.appendChild(c);const o=document.createElement("div");o.classList.add("product_box");const i=document.createElement("div");i.classList.add("product_img_box");const a=document.createElement("img");a.src=e.image,a.classList.add("product_img"),i.appendChild(a);const d=document.createElement("div");d.classList.add("product_logo_box");const s=document.createElement("img");s.src=e.logo,s.classList.add("product_logo_img");const r=document.createElement("div"),u=document.createElement("i");u.classList.add("fa-solid","fa-heart","add_to_wishlist");const p=document.createElement("i");p.classList.add("fa-solid","fa-cart-shopping","add_to_cart"),r.appendChild(u),r.appendChild(p),d.appendChild(s),d.appendChild(r);const l=document.createElement("div");l.classList.add("center");const h=document.createElement("article");h.classList.add("product_name_box");const m=document.createElement("h3");m.classList.add("product_name"),m.textContent=e.name,h.appendChild(m);const _=document.createElement("article");_.classList.add("describe_box");const g=document.createElement("p");g.classList.add("describe"),g.textContent=e.description,_.appendChild(g);const f=document.createElement("article");f.classList.add("buy_box");const C=document.createElement("div"),y=document.createElement("div");y.classList.add("original_price_box");const x=document.createElement("h4");x.classList.add("original_price"),x.textContent=e.originalPrice;const E=document.createElement("p");E.classList.add("discount"),E.textContent=e.discount,y.appendChild(x),y.appendChild(E);const S=document.createElement("h2");S.textContent=e.finalPrice,C.appendChild(y),C.appendChild(S);const L=document.createElement("a");L.href=`product.html?category=${encodeURIComponent(e.category)}&id=${e.id}&name=${encodeURIComponent(e.name)}`,L.classList.add("a_button");const b=document.createElement("button");b.classList.add("button");const I=document.createElement("i");I.classList.add("fa-solid","fa-bag-shopping"),b.appendChild(I),L.appendChild(b),f.appendChild(C),f.appendChild(L),l.appendChild(h),l.appendChild(_),l.appendChild(f);const v=document.createElement("div");v.classList.add("new_popular");const w=document.createElement("div");if(w.classList.add("curve"),o.appendChild(i),o.appendChild(d),o.appendChild(l),o.appendChild(v),o.appendChild(w),n.appendChild(t),n.appendChild(o),window.location.href.includes("catalog.html")){const O=new URLSearchParams(window.location.search).get("category");if(e.category===O){const P=document.querySelector("#catalog");P&&P.appendChild(n)}}}function D(e){const n=e.currentTarget;n.classList.contains("add_to_wishlist_click")?n.classList.remove("add_to_wishlist_click"):n.classList.add("add_to_wishlist_click");const t=n.closest(".product_super_box");if(!t)return;const c=t.id,o=t.querySelector(".product_name")?.textContent.trim(),i=t.querySelector(".describe")?.textContent.trim(),a=t.querySelector(".product_img")?.src,d=t.querySelector(".product_logo_img")?.src,s=t.querySelector(".original_price")?.textContent.trim(),r=t.querySelector(".discount")?.textContent.trim(),u=t.querySelector("h2")?.textContent.trim(),p=parseInt(t.dataset.stock)||1,l=t.querySelector(".a_button")?.href;if(!c||!o)return;const h={id:c,name:o,description:i,image:a,logo:d,originalPrice:s,discount:r,finalPrice:u,stock:p,buyLink:l};let m=JSON.parse(localStorage.getItem("wishlist"))||[];const _=m.findIndex(g=>g.id===c);n.classList.contains("add_to_wishlist_click")?_===-1&&m.push(h):_!==-1&&m.splice(_,1),localStorage.setItem("wishlist",JSON.stringify(m))}function U(){(JSON.parse(localStorage.getItem("wishlist"))||[]).forEach(n=>{const t=document.getElementById(n.id);if(t){const c=t.querySelector(".add_to_wishlist");c&&c.classList.add("add_to_wishlist_click")}})}function H(){const e=JSON.parse(localStorage.getItem("wishlist"))||[],n=document.querySelector("#wish_chosen_products_list_ul");if(!n){console.warn("Container for wishlist not found!");return}if(n.innerHTML="",e.length===0)return;e.forEach(c=>{Q(c)}),Y();const t=document.querySelector(".wish_header p");t&&(t.textContent="You have: "+e.length+" items in your wishlist.")}function Q(e){const n=document.createElement("li");n.setAttribute("data-id",e.id);const t=document.createElement("div");t.classList.add("wish_chosen_product_list");const c=document.createElement("i");c.classList.add("wish_delete","fa-solid","fa-heart");const o=document.createElement("div");o.classList.add("wish_chosen_product_img_box");const i=document.createElement("a");i.href=`catalog.html#${e.id}`;const a=document.createElement("img");a.src=e.image,a.alt=e.name;const d=document.createElement("article");d.classList.add("wish_chosen_product_content_box");const s=document.createElement("div");s.classList.add("wish_chosen_product_price");const r=document.createElement("div");r.classList.add("original_price_box");const u=document.createElement("h4");u.classList.add("original_price"),u.textContent=e.originalPrice;const p=document.createElement("p");p.classList.add("discount"),p.textContent=e.discount;const l=document.createElement("h2");l.textContent=e.finalPrice;const h=document.createElement("div");h.classList.add("wish_product_title");const m=document.createElement("h3");m.classList.add("wish_product_name"),m.textContent=e.name;const _=document.createElement("p");_.classList.add("wish_describe"),_.textContent=e.description;const g=document.createElement("div");g.classList.add("wish_product_buttons");const f=document.createElement("button");f.textContent="Add to cart";const C=document.createElement("a"),y=document.createElement("button");C.href=e.buyLink,y.textContent="Buy now",y.classList.add("buy_now_button"),i.appendChild(a),o.appendChild(i),r.appendChild(u),r.appendChild(p),s.appendChild(r),s.appendChild(l),h.appendChild(m),h.appendChild(_),g.appendChild(f),C.appendChild(y),g.appendChild(C),d.appendChild(s),d.appendChild(h),d.appendChild(g),t.appendChild(c),t.appendChild(o),t.appendChild(d),n.appendChild(t),document.querySelector("#wish_chosen_products_list_ul").appendChild(n)}function Y(){document.querySelectorAll(".wish_delete").forEach(n=>{n.addEventListener("click",j)})}function j(e){const t=e.currentTarget.closest("li");if(!t)return;const c=t.getAttribute("data-id");t.remove();let o=JSON.parse(localStorage.getItem("wishlist"))||[];o=o.filter(a=>a.id!==c),localStorage.setItem("wishlist",JSON.stringify(o));const i=document.querySelector(".wish_header p");i&&(i.textContent="You have: "+o.length+" items in your wishlist.")}function G(e){const n=e.currentTarget;n.classList.contains("add_to_cart_click")?n.classList.remove("add_to_cart_click"):n.classList.add("add_to_cart_click");const t=n.closest(".product_super_box");if(!t)return;const c=t.id,o=t.querySelector(".product_name")?.textContent.trim(),i=t.querySelector(".describe")?.textContent.trim(),a=t.querySelector(".product_img")?.src,d=t.querySelector(".product_logo_img")?.src,s=t.querySelector(".original_price")?.textContent.trim(),r=t.querySelector(".discount")?.textContent.trim(),u=t.querySelector("h2")?.textContent.trim()||"0",p=ne(u),l=parseInt(t.dataset.stock)||1,h=1,m=t.querySelector(".a_button")?.href;if(!c||!o)return;const _={id:c,name:o,description:i,image:a,logo:d,originalPrice:s,discount:r,finalPrice:p,stock:l,quantity:h,buyLink:m};let g=JSON.parse(localStorage.getItem("cart"))||[];const f=g.findIndex(C=>C.id===c);n.classList.contains("add_to_cart_click")?f===-1&&g.push(_):f!==-1&&g.splice(f,1),localStorage.setItem("cart",JSON.stringify(g))}function K(){(JSON.parse(localStorage.getItem("cart"))||[]).forEach(n=>{const t=document.getElementById(n.id);if(t){const c=t.querySelector(".add_to_cart");c&&c.classList.add("add_to_cart_click")}})}function V(){const e=JSON.parse(localStorage.getItem("cart"))||[],n=document.querySelector("#chosen_products_list_ul");if(!n){console.warn("Container for cart not found!");return}if(n.innerHTML="",e.length===0)return;e.forEach(c=>{z(c)}),X(),ee();const t=document.querySelector(".cart_header p");t&&(t.textContent="You have: "+e.length+" items in your wishlist."),B()}function z(e){const n=document.createElement("li");n.setAttribute("data-id",e.id);const t=document.createElement("div");t.classList.add("chosen_product_list"),t.dataset.price=e.finalPrice;const c=document.createElement("i");c.classList.add("cart_delete","fa-solid","fa-xmark");const o=document.createElement("div");o.classList.add("chosen_product_img_box");const i=document.createElement("a");i.href=`catalog.html#${e.id}`;const a=document.createElement("img");a.src=e.image,a.alt="",i.appendChild(a),o.appendChild(i);const d=document.createElement("ul"),s=document.createElement("li");s.textContent=e.name;const r=document.createElement("li");r.classList.add("cart_price_per_item"),r.textContent=`${e.finalPrice.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`;const u=document.createElement("li");let p=parseInt(e.quantity);(!p||p<1)&&(p=1),e.quantity=p;const l=document.createElement("input");l.type="number",l.value=p,l.min=1,l.classList.add("chosen_product_input"),l.addEventListener("keydown",function(m){(m.key==="-"||m.key==="."||m.key==="e")&&m.preventDefault()}),u.appendChild(l);const h=document.createElement("li");h.classList.add("cart_item_total_price"),e.finalPrice,h.textContent=`${(e.finalPrice*p).toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`,d.appendChild(s),d.appendChild(r),d.appendChild(u),d.appendChild(h),t.appendChild(c),t.appendChild(o),t.appendChild(d),n.appendChild(t),document.querySelector("#chosen_products_list_ul").appendChild(n)}function X(){document.querySelectorAll(".cart_delete").forEach(n=>{n.addEventListener("click",Z)})}function Z(e){const t=e.currentTarget.closest("li");if(!t)return;const c=t.getAttribute("data-id");t.remove();let o=JSON.parse(localStorage.getItem("cart"))||[];o=o.filter(a=>a.id!==c),localStorage.setItem("cart",JSON.stringify(o));const i=document.querySelector(".cart_header p");i&&(i.textContent="You have: "+o.length+" items in your wishlist."),B()}function ee(){document.querySelectorAll(".chosen_product_input").forEach(n=>{n.addEventListener("input",te)})}function te(e){const n=e.currentTarget,t=Number(n.value);(!t||t<1)&&(t=1,n.value=t);const c=n.closest(".chosen_product_list");if(!c)return;const o=Number(c.dataset.price),i=c.querySelector(".cart_item_total_price");if(!isNaN(o)&&i){const u=t*o;i.textContent=`${u.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`}const a=n.closest("li[data-id]");if(!a)return;const d=a.getAttribute("data-id");let s=JSON.parse(localStorage.getItem("cart"))||[];const r=s.findIndex(u=>u.id===d);r!==-1&&(s[r].quantity=t,localStorage.setItem("cart",JSON.stringify(s))),B()}function ne(e){let n=e.replace(/[^\d.,]/g,"");n.includes(".")&&n.includes(",")?n=n.replace(/,/g,""):n.includes(",")&&!n.includes(".")&&(n=n.replace(/,/g,"."));const t=parseFloat(n);return isNaN(t)?0:t}function B(){const e=JSON.parse(localStorage.getItem("cart"))||[];let n=0;e.forEach(o=>{const i=parseInt(o.quantity)||1,a=parseFloat(o.finalPrice)||0;n+=i*a});const t=document.querySelector(".subtotal");t&&(t.textContent=`${n.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`);const c=document.querySelector(".total");c.textContent=t.textContent}function oe(e){const n=document.createElement("img");n.classList.add("main_image"),n.src=e.image,document.querySelector("#product_page_main_img").appendChild(n);const t=document.createElement("img");t.classList.add("product_page_first_img"),t.src=e.images[0],document.querySelector("#product_page_first_second_img_box").appendChild(t);const c=document.createElement("img");c.classList.add("product_page_second_img"),c.src=e.images[1],document.querySelector("#product_page_second_second_img_box").appendChild(c);const o=document.createElement("img");o.classList.add("product_page_third_img"),o.src=e.images[2],document.querySelector("#product_page_third_second_img_box").appendChild(o);const i=document.createElement("img");i.classList.add("product_page_fourth_img"),i.src=e.images[3],document.querySelector("#product_page_fourth_second_img_box").appendChild(i);const a=document.querySelector("#product_page_name");a.textContent=e.name;const d=document.querySelector("#original_price");d.textContent=e.originalPrice;const s=document.querySelector("#discount");s.textContent=e.discount;const r=document.querySelector("#final_price");r.textContent=e.finalPrice;const u=document.querySelector("#product_page_describe");u.textContent=e.description}
