(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".subcategory_wrapper_box"),t=document.querySelector(".subcategory_3d_box"),n=document.querySelectorAll(".subcategory");if(e&&t&&n.length>0){const c=e.clientWidth,o=Math.floor(n.length/2),s=n[o],r=s.offsetLeft+s.offsetWidth/2;e.scrollLeft=r-c/2}});const k=document.querySelector(".next"),M=document.querySelector(".prev"),q=document.querySelector(".carousel");let A=null,B=null;q&&(A=q.querySelector(".list"),q.querySelectorAll(".item"),B=q.querySelector(".time_running"));let G=3e3,j=7e3;k&&k.addEventListener("click",()=>{Y("next")});M&&M.addEventListener("click",()=>{Y("prev")});let R,O=null;k&&(O=setTimeout(()=>{k&&typeof k.click=="function"&&k.click()},j));function H(){B&&(B.style.animation="none",B.offsetHeight,B.style.animation=null,B.style.animation="runningTime 7s linear 1 forwards")}function Y(e){if(!A||!q)return;let t=A.querySelectorAll(".carousel .list .item");!t||t.length===0||(e==="next"?(A.appendChild(t[0]),q.classList.add("next")):e==="prev"&&(A.prepend(t[t.length-1]),q.classList.add("prev")),clearTimeout(R),R=setTimeout(()=>{q&&(q.classList.remove("next"),q.classList.remove("prev"))},G),O&&clearTimeout(O),O=setTimeout(()=>{k&&typeof k.click=="function"&&k.click()},j),H())}H();let K=document.querySelector(".right_nav_block .fa-solid");K.addEventListener("click",V);function V(e){document.querySelector(".navigation_menu").classList.toggle("navigation_menu_open_click");let n=document.querySelector(".overlay");n.style.display="block"}let Z=document.querySelector(".navigation_menu_close_button");Z.addEventListener("click",Q);function Q(e){document.querySelector(".navigation_menu").classList.toggle("navigation_menu_open_click");let n=document.querySelector(".overlay");n.style.display="none"}let ee=document.querySelectorAll(".navigation_menu a");ee.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),Q(),setTimeout(()=>{window.location.href=e.getAttribute("href")},300)})});let U=document.querySelector(".quick_menu_filter");U&&U.addEventListener("click",te);function te(e){let t=document.querySelector(".catalog_menu");t.classList.toggle("catalog_menu_open");let n=document.querySelector(".catalog_overlay"),c=document.querySelector("footer");document.querySelector("#category_header").classList.toggle("category_header"),document.querySelector("#filter_box").classList.toggle("filter_box_query"),t.classList=="catalog_menu catalog_menu_open"?(n.style.display="block",c.style.position="fixed"):(n.style.display="none",c.style.position="static")}document.addEventListener("DOMContentLoaded",()=>{const e="shaialt",t="Moto-Ride",n=window.location.hostname===`${e}.github.io/Moto-Ride`,c=n?`/${t}/`:"/";function o(i,a){return i&&i.startsWith("/")?`/${a}${i}`:i}if((JSON.parse(localStorage.getItem("loggedInUsers"))||[]).find(i=>i.isLoggedIn)&&window.location.href.includes("login.html")){window.location.href=`${c}pages/profile.html`;return}const d=document.querySelector("#log_in_button");d&&d.addEventListener("click",async()=>{const i=document.querySelector("#log_in_email_or_username").value.trim(),a=document.querySelector("#log_in_password").value;if(!i||!a){alert("Please fill in all fields.");return}try{const h=(await(await fetch(`${c}data/users.json`)).json()).find(m=>(m.email===i||m.name===i)&&m.password===a);if(h){let m=JSON.parse(localStorage.getItem("loggedInUsers"))||[];m.push({name:h.name,email:h.email,isLoggedIn:!0}),localStorage.setItem("loggedInUsers",JSON.stringify(m)),alert("Login successful! Welcome "+h.name),window.location.href="/pages/profile.html"}else alert("Invalid username/email or password.")}catch(g){console.error("Error fetching users:",g),alert("Could not load users. Please try again later.")}});const p=document.querySelector("#sign_out");p&&(console.log(p),console.log(typeof p),p.addEventListener("click",i=>{i.preventDefault();let a=JSON.parse(localStorage.getItem("loggedInUsers"))||[];a=a.map(g=>({...g,isLoggedIn:!1})),localStorage.setItem("loggedInUsers",JSON.stringify(a)),console.log("After sign out:",a),window.location.href=`${c}pages/login.html`})),fetch(`${c}data/data.json`).then(i=>i.json()).then(i=>(n&&(i=i.map(a=>(a.image=o(a.image,t),a.logo=o(a.logo,t),Array.isArray(a.images)&&(a.images=a.images.map(g=>o(g,t))),a))),i)).then(i=>{let a=0;i.forEach(()=>a++);const g=document.querySelector(".total_products");if(g&&(g.textContent=`Discover ${a} exlusive motorcyles`),i.sort((f,y)=>y.popularity-f.popularity).slice(0,4).forEach(f=>{ne(f)}),window.location.href.includes("product.html")){const f=window.location.href.split("=")[2].split("&")[0],y=i.find(x=>x.id===f);y?ye(y):console.warn("Not found product with id:",f)}else if(window.location.href.includes("catalog.html")){let l=function(){document.querySelectorAll('.filter_sidebar input[type="checkbox"][name], .filter_sidebar_responsive input[type="checkbox"][name]').forEach(C=>{C.addEventListener("change",()=>{S(C),D(i)})}),document.querySelectorAll(".filter_sidebar .price_input, .filter_sidebar_responsive .price_input").forEach(C=>{C.addEventListener("input",()=>{w(C),D(i)})}),document.querySelectorAll(".reset_button").forEach(C=>{C.addEventListener("click",I=>{I.preventDefault(),console.log("Resetting all filters"),document.querySelectorAll('.filter_sidebar input[type="checkbox"], .filter_sidebar_responsive input[type="checkbox"]').forEach(N=>N.checked=!1),document.querySelectorAll(".filter_sidebar .price_input, .filter_sidebar_responsive .price_input").forEach(N=>N.value=""),window.history.pushState({},"",window.location.pathname);const T=document.querySelector("#catalog");T&&(T.innerHTML=""),i.forEach(N=>{$(N)})})})},S=function(u){const v=u.name,E=u.value,C=u.checked;document.querySelectorAll(`input[name="${v}"][value="${E}"]`).forEach(P=>{P!==u&&(P.checked=C)})},w=function(u){const v=u.placeholder,E=u.value;document.querySelectorAll(`.price_input[placeholder="${v}"]`).forEach(I=>{I!==u&&(I.value=E)})};var m=l,b=S,L=w;const f=xe();Se(f);const y=z(i,f);console.log("Filtered products:",y.length);const x=document.querySelector("#catalog");x&&(x.innerHTML=""),y.forEach(u=>{$(u)}),l()}const h=document.querySelector("#welcome_animation_input");h.addEventListener("input",function(){const f=document.querySelector(".suggestions_box");f&&f.remove();const y=h.value.toLowerCase();let x=[];if(h.addEventListener("keypress",function(l){l.key==="Enter"&&(l.preventDefault(),x.length>0&&(localStorage.setItem("searchResults",JSON.stringify(x)),window.location.href=`./pages/catalog.html?search=${encodeURIComponent(y)}`))}),y.length>=2){x=i.filter(S=>S.manufacturer.toLowerCase().includes(y)||S.name.toLowerCase().includes(y)||S.description.toLowerCase().includes(y));const l=x.map(S=>S.name);console.log("Filtered products:",l)}if(x.length>0){const l=document.createElement("div");l.classList.add("suggestions_box"),l.style.width="100%",l.style.height="auto",l.style.maxHeight="300px",l.style.backgroundColor="white",l.style.position="absolute",l.style.top="90%",l.style.left="0",l.style.zIndex="997",l.style.border="1px solid #601E1E",l.style.borderTop="1px solid white",l.style.borderBottomLeftRadius="6px",l.style.borderBottomRightRadius="6px",l.style.overflowY="auto",l.style.opacity="0",l.style.transform="translateY(-10px)",l.style.scrollbarWidth="thin",l.style.transition="opacity 0.5s ease, transform 0.5s ease",x.forEach(w=>{const u=document.createElement("div");u.style.padding="10px",u.style.borderBottom="1px solid #eee",u.style.cursor="pointer",u.style.display="flex",u.style.alignItems="center",u.style.justifyContent="space-between";const v=document.createElement("div");v.textContent=w.name,v.style.flex="1";const E=document.createElement("img");E.src=w.image,E.alt=w.name,E.style.width="40px",E.style.height="40px",E.style.objectFit="cover",E.style.marginLeft="10px",E.style.borderRadius="4px",u.addEventListener("click",()=>{const C=new URLSearchParams;C.append("category",w.category),C.append("id",w.id),C.append("name",w.name),window.location.href=`pages/product.html?${C.toString()}`}),u.appendChild(v),u.appendChild(E),l.appendChild(u)});const S=document.querySelector(".welcome_animation_box");S&&(S.style.position="relative",S.appendChild(l),requestAnimationFrame(()=>{l.style.opacity="1",l.style.transform="translateY(0)"}))}})}).catch(i=>console.error("Error loading JSON:",i)),se(),me()});function $(e){if(window.location.pathname.includes("catalog.html")){//!: קריאה לפונקציה שיוצרת את המוצר בקטלוג
oe(e)}//!: השמה של איבנט על האייקונים שבתוך המוצר להוספה למועדפים
document.querySelectorAll(".product_super_box").forEach(n=>{const c=n.querySelector(".add_to_wishlist");c&&c.addEventListener("click",ce);const o=n.querySelector(".add_to_cart");o&&o.addEventListener("click",de)});//!: קריאה לפונקציה שמעדכנת מצב מועדפים ועגלה לאחר קבלת תשובה מהשרת
ie(),ue()}function ne(e){const t=document.createElement("div");t.classList.add("top_product_super_box"),t.id=e.id,t.setAttribute("data-stock",e.stock||1),e.status&&t.style.setProperty(`--${e.status}`,"true");const n=document.createElement("div");n.classList.add("box");const c=document.createElement("p");c.textContent="Moto-Ride 🏍️",n.appendChild(c);const o=document.createElement("div");o.classList.add("product_box");const s=document.createElement("div");s.classList.add("product_img_box");const r=document.createElement("img");r.src=e.image,r.classList.add("product_img"),s.appendChild(r);const d=document.createElement("div");d.classList.add("product_logo_box");const p=document.createElement("img");p.src=e.logo,p.classList.add("product_logo_img");const i=document.createElement("div"),a=document.createElement("i");a.classList.add("fa-solid","fa-heart","add_to_wishlist");const g=document.createElement("i");g.classList.add("fa-solid","fa-cart-shopping","add_to_cart"),i.appendChild(a),i.appendChild(g),d.appendChild(p),d.appendChild(i);const _=document.createElement("div");_.classList.add("center");const h=document.createElement("article");h.classList.add("product_name_box");const m=document.createElement("h3");m.classList.add("product_name"),m.textContent=e.name,h.appendChild(m);const b=document.createElement("article");b.classList.add("describe_box");const L=document.createElement("p");L.classList.add("describe"),L.textContent=e.description,b.appendChild(L);const f=document.createElement("article");f.classList.add("buy_box");const y=document.createElement("div"),x=document.createElement("div");x.classList.add("original_price_box");const l=document.createElement("h4");l.classList.add("original_price"),l.textContent=e.originalPrice;const S=document.createElement("p");S.classList.add("discount"),S.textContent=e.discount,x.appendChild(l),x.appendChild(S);const w=document.createElement("h2");w.textContent=e.finalPrice,y.appendChild(x),y.appendChild(w);const u=document.createElement("a");u.href=`product.html?category=${encodeURIComponent(e.category)}&id=${e.id}&name=${encodeURIComponent(e.name)}`,u.classList.add("a_button");const v=document.createElement("button");v.classList.add("button");const E=document.createElement("i");E.classList.add("fa-solid","fa-bag-shopping"),v.appendChild(E),u.appendChild(v),f.appendChild(y),f.appendChild(u),_.appendChild(h),_.appendChild(b),_.appendChild(f);const C=document.createElement("div");C.classList.add("new_popular");const I=document.createElement("div");I.classList.add("curve"),o.appendChild(s),o.appendChild(d),o.appendChild(_),o.appendChild(C),o.appendChild(I),t.appendChild(n),t.appendChild(o);const P=document.querySelector("#top_products");P&&P.appendChild(t)}function oe(e){const t=document.createElement("div");t.classList.add("product_super_box"),t.id=e.id,t.setAttribute("data-stock",e.stock||1),e.status&&t.style.setProperty(`--${e.status}`,"true");const n=document.createElement("div");n.classList.add("box");const c=document.createElement("p");c.textContent="Moto-Ride 🏍️",n.appendChild(c);const o=document.createElement("div");o.classList.add("product_box");const s=document.createElement("div");s.classList.add("product_img_box");const r=document.createElement("img");r.src=e.image,r.classList.add("product_img"),s.appendChild(r);const d=document.createElement("div");d.classList.add("product_logo_box");const p=document.createElement("img");p.src=e.logo,p.classList.add("product_logo_img");const i=document.createElement("div"),a=document.createElement("i");a.classList.add("fa-solid","fa-heart","add_to_wishlist");const g=document.createElement("i");g.classList.add("fa-solid","fa-cart-shopping","add_to_cart"),i.appendChild(a),i.appendChild(g),d.appendChild(p),d.appendChild(i);const _=document.createElement("div");_.classList.add("center");const h=document.createElement("article");h.classList.add("product_name_box");const m=document.createElement("h3");m.classList.add("product_name"),m.textContent=e.name,h.appendChild(m);const b=document.createElement("article");b.classList.add("describe_box");const L=document.createElement("p");L.classList.add("describe"),L.textContent=e.description,b.appendChild(L);const f=document.createElement("article");f.classList.add("buy_box");const y=document.createElement("div"),x=document.createElement("div");x.classList.add("original_price_box");const l=document.createElement("h4");l.classList.add("original_price"),l.textContent=e.originalPrice;const S=document.createElement("p");S.classList.add("discount"),S.textContent=e.discount,x.appendChild(l),x.appendChild(S);const w=document.createElement("h2");w.textContent=e.finalPrice,y.appendChild(x),y.appendChild(w);const u=document.createElement("a");u.href=`product.html?category=${encodeURIComponent(e.category)}&id=${e.id}&name=${encodeURIComponent(e.name)}`,u.classList.add("a_button");const v=document.createElement("button");v.classList.add("button");const E=document.createElement("i");E.classList.add("fa-solid","fa-bag-shopping"),v.appendChild(E),u.appendChild(v),f.appendChild(y),f.appendChild(u),_.appendChild(h),_.appendChild(b),_.appendChild(f);const C=document.createElement("div");C.classList.add("new_popular");const I=document.createElement("div");if(I.classList.add("curve"),o.appendChild(s),o.appendChild(d),o.appendChild(_),o.appendChild(C),o.appendChild(I),t.appendChild(n),t.appendChild(o),window.location.href.includes("catalog.html")){const P=document.querySelector("#catalog");P&&P.appendChild(t)}}function ce(e){const t=e.currentTarget;t.classList.contains("add_to_wishlist_click")?t.classList.remove("add_to_wishlist_click"):t.classList.add("add_to_wishlist_click");const n=t.closest(".product_super_box");if(!n)return;const c=n.id,o=n.querySelector(".product_name")?.textContent.trim(),s=n.querySelector(".describe")?.textContent.trim(),r=n.querySelector(".product_img")?.src,d=n.querySelector(".product_logo_img")?.src,p=n.querySelector(".original_price")?.textContent.trim(),i=n.querySelector(".discount")?.textContent.trim(),a=n.querySelector("h2")?.textContent.trim(),g=parseInt(n.dataset.stock)||1,_=n.querySelector(".a_button")?.href;if(!c||!o)return;const h={id:c,name:o,description:s,image:r,logo:d,originalPrice:p,discount:i,finalPrice:a,stock:g,buyLink:_};let m=JSON.parse(localStorage.getItem("wishlist"))||[];const b=m.findIndex(L=>L.id===c);t.classList.contains("add_to_wishlist_click")?b===-1&&m.push(h):b!==-1&&m.splice(b,1),localStorage.setItem("wishlist",JSON.stringify(m))}function ie(){(JSON.parse(localStorage.getItem("wishlist"))||[]).forEach(t=>{const n=document.getElementById(t.id);if(n){const c=n.querySelector(".add_to_wishlist");c&&c.classList.add("add_to_wishlist_click")}})}function se(){const e=JSON.parse(localStorage.getItem("wishlist"))||[],t=document.querySelector("#wish_chosen_products_list_ul");if(!t){console.warn("Container for wishlist not found!");return}if(t.innerHTML="",e.length===0)return;e.forEach(c=>{ae(c)}),re();const n=document.querySelector(".wish_header p");n&&(n.textContent="You have: "+e.length+" items in your wishlist.")}function ae(e){const t=document.createElement("li");t.setAttribute("data-id",e.id);const n=document.createElement("div");n.classList.add("wish_chosen_product_list");const c=document.createElement("i");c.classList.add("wish_delete","fa-solid","fa-heart");const o=document.createElement("div");o.classList.add("wish_chosen_product_img_box");const s=document.createElement("a");s.href=`catalog.html#${e.id}`;const r=document.createElement("img");r.src=e.image,r.alt=e.name;const d=document.createElement("article");d.classList.add("wish_chosen_product_content_box");const p=document.createElement("div");p.classList.add("wish_chosen_product_price");const i=document.createElement("div");i.classList.add("original_price_box");const a=document.createElement("h4");a.classList.add("original_price"),a.textContent=e.originalPrice;const g=document.createElement("p");g.classList.add("discount"),g.textContent=e.discount;const _=document.createElement("h2");_.textContent=e.finalPrice;const h=document.createElement("div");h.classList.add("wish_product_title");const m=document.createElement("h3");m.classList.add("wish_product_name"),m.textContent=e.name;const b=document.createElement("p");b.classList.add("wish_describe"),b.textContent=e.description;const L=document.createElement("div");L.classList.add("wish_product_buttons");const f=document.createElement("button");f.textContent="Add to cart";const y=document.createElement("a"),x=document.createElement("button");y.href=e.buyLink,x.textContent="Buy now",x.classList.add("buy_now_button"),s.appendChild(r),o.appendChild(s),i.appendChild(a),i.appendChild(g),p.appendChild(i),p.appendChild(_),h.appendChild(m),h.appendChild(b),L.appendChild(f),y.appendChild(x),L.appendChild(y),d.appendChild(p),d.appendChild(h),d.appendChild(L),n.appendChild(c),n.appendChild(o),n.appendChild(d),t.appendChild(n),document.querySelector("#wish_chosen_products_list_ul").appendChild(t)}function re(){document.querySelectorAll(".wish_delete").forEach(t=>{t.addEventListener("click",le)})}function le(e){const n=e.currentTarget.closest("li");if(!n)return;const c=n.getAttribute("data-id");n.remove();let o=JSON.parse(localStorage.getItem("wishlist"))||[];o=o.filter(r=>r.id!==c),localStorage.setItem("wishlist",JSON.stringify(o));const s=document.querySelector(".wish_header p");s&&(s.textContent="You have: "+o.length+" items in your wishlist.")}function de(e){const t=e.currentTarget;t.classList.contains("add_to_cart_click")?t.classList.remove("add_to_cart_click"):t.classList.add("add_to_cart_click");const n=t.closest(".product_super_box");if(!n)return;const c=n.id,o=n.querySelector(".product_name")?.textContent.trim(),s=n.querySelector(".describe")?.textContent.trim(),r=n.querySelector(".product_img")?.src,d=n.querySelector(".product_logo_img")?.src,p=n.querySelector(".original_price")?.textContent.trim(),i=n.querySelector(".discount")?.textContent.trim(),a=n.querySelector("h2")?.textContent.trim()||"0",g=X(a),_=parseInt(n.dataset.stock)||1;let h=1;const m=n.querySelector(".a_button")?.href;if(!c||!o)return;const b={id:c,name:o,description:s,image:r,logo:d,originalPrice:p,discount:i,finalPrice:g,stock:_,quantity:h,buyLink:m};let L=JSON.parse(localStorage.getItem("cart"))||[];const f=L.findIndex(y=>y.id===c);t.classList.contains("add_to_cart_click")?f===-1&&L.push(b):f!==-1&&L.splice(f,1),localStorage.setItem("cart",JSON.stringify(L))}function ue(){(JSON.parse(localStorage.getItem("cart"))||[]).forEach(t=>{const n=document.getElementById(t.id);if(n){const c=n.querySelector(".add_to_cart");c&&c.classList.add("add_to_cart_click")}})}function me(){const e=JSON.parse(localStorage.getItem("cart"))||[],t=document.querySelector("#chosen_products_list_ul");if(!t){console.warn("Container for cart not found!");return}if(t.innerHTML="",e.length===0)return;e.forEach(c=>{pe(c)}),ge(),fe();const n=document.querySelector(".cart_header p");n&&(n.textContent="You have: "+e.length+" items in your wishlist."),F()}function pe(e){const t=document.createElement("li");t.setAttribute("data-id",e.id);const n=document.createElement("div");n.classList.add("chosen_product_list"),n.dataset.price=e.finalPrice;const c=document.createElement("i");c.classList.add("cart_delete","fa-solid","fa-xmark");const o=document.createElement("div");o.classList.add("chosen_product_img_box");const s=document.createElement("a");s.href=`catalog.html#${e.id}`;const r=document.createElement("img");r.src=e.image,r.alt="",s.appendChild(r),o.appendChild(s);const d=document.createElement("ul"),p=document.createElement("li");p.textContent=e.name;const i=document.createElement("li");i.classList.add("cart_price_per_item"),i.textContent=`${e.finalPrice.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`;const a=document.createElement("li");let g=parseInt(e.quantity);(!g||g<1)&&(g=1),e.quantity=g;const _=document.createElement("input");_.type="number",_.value=g,_.min=1,_.classList.add("chosen_product_input"),_.addEventListener("keydown",function(m){(m.key==="-"||m.key==="."||m.key==="e")&&m.preventDefault()}),a.appendChild(_);const h=document.createElement("li");h.classList.add("cart_item_total_price"),e.finalPrice,h.textContent=`${(e.finalPrice*g).toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`,d.appendChild(p),d.appendChild(i),d.appendChild(a),d.appendChild(h),n.appendChild(c),n.appendChild(o),n.appendChild(d),t.appendChild(n),document.querySelector("#chosen_products_list_ul").appendChild(t)}function ge(){document.querySelectorAll(".cart_delete").forEach(t=>{t.addEventListener("click",he)})}function he(e){const n=e.currentTarget.closest("li");if(!n)return;const c=n.getAttribute("data-id");n.remove();let o=JSON.parse(localStorage.getItem("cart"))||[];o=o.filter(r=>r.id!==c),localStorage.setItem("cart",JSON.stringify(o));const s=document.querySelector(".cart_header p");s&&(s.textContent="You have: "+o.length+" items in your wishlist."),F()}function fe(){document.querySelectorAll(".chosen_product_input").forEach(t=>{t.addEventListener("input",_e)})}function _e(e){const t=e.currentTarget,n=Number(t.value);(!n||n<1)&&(n=1,t.value=n);const c=t.closest(".chosen_product_list");if(!c)return;const o=Number(c.dataset.price),s=c.querySelector(".cart_item_total_price");if(!isNaN(o)&&s){const a=n*o;s.textContent=`${a.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`}const r=t.closest("li[data-id]");if(!r)return;const d=r.getAttribute("data-id");let p=JSON.parse(localStorage.getItem("cart"))||[];const i=p.findIndex(a=>a.id===d);i!==-1&&(p[i].quantity=n,localStorage.setItem("cart",JSON.stringify(p))),F()}function X(e){if(!e)return 0;let t=e.replace(/[^\d.,]/g,"");t.includes(".")&&t.includes(",")?t=t.replace(/,/g,""):t.includes(",")&&!t.includes(".")&&(t=t.replace(/,/g,"."));const n=parseFloat(t);return isNaN(n)?0:n}function F(){const e=JSON.parse(localStorage.getItem("cart"))||[];let t=0;e.forEach(o=>{const s=parseInt(o.quantity)||1,r=parseFloat(o.finalPrice)||0;t+=s*r});const n=document.querySelector(".subtotal");n&&(n.textContent=`${t.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2})} $`);const c=document.querySelector(".total");c.textContent=n.textContent}function ye(e){const t=document.createElement("img");t.classList.add("main_image"),t.src=e.image,document.querySelector("#product_page_main_img").appendChild(t);const n=document.createElement("img");n.classList.add("product_page_first_img"),n.src=e.images[0],document.querySelector("#product_page_first_second_img_box").appendChild(n);const c=document.createElement("img");c.classList.add("product_page_second_img"),c.src=e.images[1],document.querySelector("#product_page_second_second_img_box").appendChild(c);const o=document.createElement("img");o.classList.add("product_page_third_img"),o.src=e.images[2],document.querySelector("#product_page_third_second_img_box").appendChild(o);const s=document.createElement("img");s.classList.add("product_page_fourth_img"),s.src=e.images[3],document.querySelector("#product_page_fourth_second_img_box").appendChild(s);const r=document.querySelector("#product_page_name");r.textContent=e.name;const d=document.querySelector("#original_price");d.textContent=e.originalPrice;const p=document.querySelector("#discount");p.textContent=e.discount;const i=document.querySelector("#final_price");i.textContent=e.finalPrice;const a=document.querySelector("#product_page_describe");a.textContent=e.description}const J=document.querySelector("#switch_to_sign_in");J&&J.addEventListener("click",()=>{document.querySelector(".log_in_hello_box").style.transform="translateX(12.5%)"});const W=document.querySelector("#switch_to_sign_up");W&&W.addEventListener("click",()=>{document.querySelector(".log_in_hello_box").style.transform="translateX(-87.5%)"});function z(e,t){return e.filter(n=>{if(t.brands.length>0&&!t.brands.includes(n.manufacturer)||t.statuses.length>0&&!t.statuses.includes(n.status)||t.types.length>0&&!t.types.includes(n.type))return!1;if(t.minPrice||t.maxPrice){const c=n.finalPrice||n.originalPrice;if(c){const o=X(c);if(t.minPrice&&o<t.minPrice||t.maxPrice&&o>t.maxPrice)return!1}}return!0})}function xe(){const e=new URLSearchParams(window.location.search);return{brands:e.get("brand")?e.get("brand").split(","):[],statuses:e.get("status")?e.get("status").split(","):[],types:e.get("type")?e.get("type").split(","):[],minPrice:e.get("minPrice")?parseFloat(e.get("minPrice")):null,maxPrice:e.get("maxPrice")?parseFloat(e.get("maxPrice")):null}}function Ce(e){const t=new URLSearchParams;e.brands.length>0&&t.set("brand",e.brands.join(",")),e.statuses.length>0&&t.set("status",e.statuses.join(",")),e.types.length>0&&t.set("type",e.types.join(",")),e.minPrice&&t.set("minPrice",e.minPrice),e.maxPrice&&t.set("maxPrice",e.maxPrice);const n=t.toString()?`?${t.toString()}`:window.location.pathname;window.history.pushState({},"",n)}function Le(){const e=Array.from(document.querySelectorAll('input[name="brand"]:checked')).map(r=>r.value),t=Array.from(document.querySelectorAll('input[name="status"]:checked')).map(r=>r.value),n=Array.from(document.querySelectorAll('input[name="type"]:checked')).map(r=>r.value),c=document.querySelectorAll(".price_input"),o=c[0]?.value||null,s=c[1]?.value||null;return{brands:e,statuses:t,types:n,minPrice:o?parseFloat(o):null,maxPrice:s?parseFloat(s):null}}function Se(e){e.brands.forEach(n=>{const c=document.querySelector(`input[name="brand"][value="${n}"]`);c&&(c.checked=!0)}),e.statuses.forEach(n=>{const c=document.querySelector(`input[name="status"][value="${n}"]`);c&&(c.checked=!0)}),e.types.forEach(n=>{const c=document.querySelector(`input[name="type"][value="${n}"]`);c&&(c.checked=!0)});const t=document.querySelectorAll(".price_input");e.minPrice&&t[0]&&(t[0].value=e.minPrice),e.maxPrice&&t[1]&&(t[1].value=e.maxPrice)}function D(e){const t=Le();console.log("Applying filters:",t),Ce(t);const n=z(e,t);console.log("Results:",n.length);const c=document.querySelector("#catalog");if(!c){console.error("Container #catalog not found!");return}c.innerHTML="",n.forEach(o=>{$(o)})}
